Feature: Toggle commify in various numbers

  Background:
    Given I switch to buffer "*commify-test*"
    And I clear the buffer
    And I insert:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """
    And I go to the beginning of the buffer
    And I bind key "C-c ,," to "commify-toggle"

  Scenario: Toggle a dollar-value number
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90,809,823,434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a dollar-value number with decimal
    When I press "M-f"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209,409,283,409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a euro currency number with decimal
    When I press "C-s ₠ RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209,409,283,409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """
  Scenario: Toggle a euro number with decimal
    When I press "C-s € RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209,409,283,409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a Yen number with decimal
    When I press "C-s ¥ RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209,409,283,409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a British pound number with decimal
    When I press "C-s £ RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209,409,283,409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """
  Scenario: Toggle a square-bracket delimited number with decimal
    When I press "C-s [ RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209,409,283,409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a brace-delimited number with decimal
    When I press "C-s { RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209,409,283,409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a paren-delimited number with decimal
    When I press "C-s ( RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209,409,283,409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a < delimited number with decimal
    When I press "C-s < RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209,409,283,409.00>
      \"209409283409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a \" delimited number with decimal
    When I press "C-s \" RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209,409,283,409.00\"
      '209409283409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a ' delimited number with decimal
    When I press "C-s ' RET"
    When I press "M-f"
    When I press "C-c ,,"
    Then I should see:
      """
      $90809823434
      $209409283409.00
      ₠209409283409.00
      €209409283409.00
      ¥209409283409.00
      £209409283409.00
      [209409283409.00]
      {209409283409.00}
      (209409283409.00)
      <209409283409.00>
      \"209409283409.00\"
      '209,409,283,409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """

  Scenario: Toggle a region with currency and delimited numbers
    When I press "C-SPC"
    When I press "C-s A20 RET"
    When I press "C-c ,,"
    Then I should see:
      """
      $90,809,823,434
      $209,409,283,409.00
      ₠209,409,283,409.00
      €209,409,283,409.00
      ¥209,409,283,409.00
      £209,409,283,409.00
      [209,409,283,409.00]
      {209,409,283,409.00}
      (209,409,283,409.00)
      <209,409,283,409.00>
      \"209,409,283,409.00\"
      '209,409,283,409.00'
      A209409283409.00
      209409283409.00
      <2011-09-22>
      [9/11/2001]
      <2020-07-19 Sun>
      """
